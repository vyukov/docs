.. _cfx_hair-lable:

Hair
======

Процесс создания волос можно разбить на три основных этапа. 

1. Groom
_______

**Первым этапом является так называемый груминг (Groom — англ. ухаживать). Его целью является придание прическе персонажа желаемого вида. Процесс заключается в укладке гайд волос (guide — направляющая).**

*Для того чтобы загрумить персонажа нужно:*

	* Запустить Shotgun;
	
	* Открыть Maya 2016;
	
	* Выбрать требуемый таск и создать новую сцену;

	* В новую сцену загрузить всю требуемую для начала работы геометрию (geo, proxy, cloth, cloth_skn) воспользовавшись функцией Load из меню Shotgun;

	* Сгруппировать всю загруженную геометрию согласно утвержденной иерархии;

	* Дублировать геометрию тела персонажа, переименовать ее в “scalp”. Оставить только те полигоны из которых предполагается выращивание волос. Если предполагается рост волос не только из тела персонажа (например волосатая одежда), то следует и из этих частей сделать скальп, объединив их потом в один меш;

	* Сделать развертку UV координат;

	* Выполнить грум согласно техническим требованиям;

	* Отрендерить персонажа с разных ракурсов и загрузить одним изображением в Shotgun > Task >Versions;

	* После утверждения версии сконвертировать гайды каждого дескрипшена в кривые (имя группы кривых должно соответствовать имени дескрипшена с заменой “collection” на “crv”. Например “braid_crv”);

	* Изменить параметры моушн блура, прозрачности и пр. для каждого дескрипшена;

	* Если в среди модификаторов дескришена есть нойз, то его следует забейкать чтоб избежать шевеления волос при анимации;
	
	* Выполнить Shotgun > Publish;
	
	* При первом паблише в описании написать «первый паблиш». Во всех последующих паблишах в описании указать чем эта версия отличается от предыдущей.
	
2. Anim rig
___________

**Вторым этапом производства волос является создание грум рига (groom_rig). Грум риг это подготовленный к анимации файл, в котором вся необходимая информация собрана таким образом чтоб осталось подключить анимационные кеши этого шота, этого персонажа и во время проигрывания анимации волосы вели себя естественно.**

Для того чтобы начать работу над грум ригом, для того чтобы была возможность проверить все параметры и увидеть результаты всех настроек еще до начала работы в шотах, следует подготовить тестовые анимационные кеши.

*Для того чтобы подготовить тестовые анимационные кеши нужно:*

	* Запустить Shotgun;
	
	* Открыть Maya 2016;
	
	* Выбрать требуемый требуемый ассета открыть паблишеную версию анимационного рига;
	
	* Выбрать все контролы персонажа и подгрузить тестовую анимацию из библиотеки Studio Library (AMG Tools > Animation >Studio Library). На данный момент допустимые тестовые анимации следующие: 390-shot, dance, run. Так же обязательным для выводя является Т-поза, для возврата персонажа в стартовую позицию (никакой анимации из StudioLibrary в данном случае );
	
	* Выполнить скрипт “Export Test Caches”  из shelf-a “CreatureFX” и из предложенных вариантов вывода кешей выбрать тот, который был подгружен ранее из библиотеки;
	
	* После вывода кешей, майа сама закроется.

3. Groom rig 
__________
	
*Для того чтобы сделать грум риг персонажа нужно:*

	* Запустить Shotgun;

	* Открыть Maya 2016;
	
	* Выбрать требуемый таск и создать новую сцену;

	* Загрузить исходную геометрию, создать утвержденную структуру файла, создать систему волос для каждого дескрипшена. Все эти действия выполняет скрипт “create gRig” из шелфа CreatureFX;
	
	* Настроить параметра каждого дескрипшена, создать все необходимые коллайдеры, констрейны и прочее;

	* Отметить какие из дескрипшенов будут динамическими (Дополнительній атрибут “dynamic” групп “output”);

	* С помощью скрипта “Test Groom Rig” из шелфа CreatureFX подгрузить тестовую анимацию;

	* Внести правки если необходимо;

	* Поменять отображение кривых на отображение Xgen;

	* Сделать плейбласт и загрузить в шотган для утверждения;

	* После утверждения вернуть персонажа в Т-позу запаблишить;

	* При первом паблише в описании написать «первый паблиш». Во всех последующих паблишах в описании указать чем эта версия отличается от предыдущей.

**Завершающим этапом работы над волосами будет работа непосредственно в шоте.**

*Для того чтобы отсимулить волосы персонажа в шоте нужно:*

	* Запустить Shotgun;

	* Открыть Maya 2016;
	
	* Выбрать требуемый таск и создать новую сцену;
	
	* Импортировать грум риг в сцену скриптом “import hair”;
	
	* Сделать плейбласт, посмотреть всё ли нормально, внести правки;
	
	* Сделать экспорт скриптом “Export Hair Sim”;

	* Загрузить плейбласт шота в шотган для утверждения;

	* Запаблишить файл сцены.

